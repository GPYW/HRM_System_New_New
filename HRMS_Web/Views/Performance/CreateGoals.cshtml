@model HRMS_Web.Models.Goals

@{
    ViewData["Title"] = "Create Goals";
    var users = ViewBag.Users as List<HRMS_Web.Models.ApplicationUser>;
}


<div class="modal-content">
    <div class="modal-header">
        <h5 class="modal-title">Create Employee Goals</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <form asp-action="CreateGoals" method="post">
            @Html.AntiForgeryToken()

            <div class="row">
                <div class="col-6 pb-4">
                    <label class="control-label">Employee</label>
                    <select id="UserDropdown" name="Employee" class="form-control" required>
                        <option value="" disabled selected>Select Employee</option>
                        @foreach (var user in users)
                        {
                            <option value="@user.Id" data-name="@user.FirstName @user.LastName">@($"{user.FirstName} {user.LastName}")</option>
                        }
                    </select>
                    <span asp-validation-for="Employee" class="text-danger"></span>
                </div>

                <div class="col-6 pb-4">
                    <label for="Title">Goal Title</label>
                    <input type="text" id="Title" name="Title" class="form-control" required />
                    <span asp-validation-for="Title" class="text-danger"></span>
                </div>
            </div>

            <div class="row">
                <div class="col-6 pb-4">
                    <label for="StartDate">Start Date</label>
                    <input type="date" id="StartDate" name="StartDate" class="form-control" required />
                    @*       <span asp-validation-for="StartDate" class="text-danger"></span> *@
                </div>

                <div class="col-6 pb-4">
                    <label for="EndDate">End Date</label>
                    <input type="date" id="EndDate" name="EndDate" class="form-control" required />
                    @*       <span asp-validation-for="EndDate" class="text-danger"></span> *@
                </div>
            </div>

            <div class="row">
                <div class="col-12 pb-4">
                    <label for="Description">Description</label>
                    <textarea id="Description" name="Description" class="form-control" required></textarea>
                    @*       <span asp-validation-for="Description" class="text-danger"></span> *@
                </div>
            </div>

            <div class="row">
                <div class="col-12 pb-4">
                    <label class="col-form-label">Status</label>
                    <select id="StatusDropdown" name="Status" class="form-control" required>
                        <option value="" disabled selected>Status</option>
                        <option>Active</option>
                        <option>Inactive</option>
                    </select>
                </div>
            </div>


            <input type="hidden" id="EmployeeId" name="Id" value="" />
            <input type="hidden" id="EmployeeName" name="Employee" value="" />

            <div class="row">
                <div class="col-3 pb-5">
                    <button type="submit" class="btn btn-dark form-control">Submit</button>
                </div>
                <div class="col-3 pb-5">
                    <a asp-controller="Performance" asp-action="Goals" class="btn btn-outline-dark form-control">Back to List</a>
                </div>
            </div>
        </form>
    </div>
</div>

@* <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script> *@

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    @*  <script>
        document.addEventListener('DOMContentLoaded', function () {
            const userDropdown = document.getElementById('UserDropdown');
            userDropdown.addEventListener('change', function () {
                const selectedUserId = this.value;
                console.log('Selected User ID:', selectedUserId);
                // Additional JavaScript actions can be added here
            });
        });
    </script>  *@

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const userDropdown = document.getElementById('UserDropdown');
            userDropdown.addEventListener('change', function () {
                const selectedUserId = this.value;
                const selectedUserName = this.options[this.selectedIndex].getAttribute('data-name');
                console.log('Selected User ID:', selectedUserId);
                console.log('Selected User Name:', selectedUserName);

                // Set the hidden input values
                document.getElementById('EmployeeId').value = selectedUserId;
                document.getElementById('EmployeeName').value = selectedUserName;
            });
        });
    </script>


}
